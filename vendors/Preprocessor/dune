(ocamllex
   E_Lexer Preproc)

(menhir
  (modules E_Parser))

(library
  (name Preprocessor)
  (public_name ligo.preproc)
  (libraries
     getopt
     simple-utils)
  (wrapped true)
  (modules EvalOpt E_Parser E_Lexer E_AST Preproc)
  (preprocess
    (pps bisect_ppx --conditional)))

(executable
  (name PreprocMain)
  (modules PreprocMain)
  (libraries Preproc)
  (preprocess
    (pps bisect_ppx --conditional)))

(executable
  (name E_LexerMain)
  (modules E_LexerMain)
  (libraries Preproc)
  (preprocess
    (pps bisect_ppx --conditional)))

(executable
  (name E_ParserMain)
  (modules E_ParserMain)
  (libraries Preproc)
  (preprocess
    (pps bisect_ppx --conditional)))
